<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PF2026.exe — FIS VŠE</title>
<style>
  body {
    background-color: #000;
    color: #00b050;
    font-family: "Courier New", monospace;
    margin: 0;
    padding: 20px;
    transition: background-color 0.2s;
  }

  #terminal {
    white-space: pre-wrap;
    line-height: 1.3em;
    position: relative;
  }

  #cursor {
    display: inline-block;
    width: 8px;
    height: 1em;
    background-color: #00b050;
    animation: blink 1s steps(1) infinite;
    vertical-align: bottom;
  }

  @keyframes blink { 50% { opacity: 0; } }

  #pfText {
    display: none;
    margin-top: 20px;
    color: #00ff66;
    font-weight: bold;
    font-size: 2em;
    letter-spacing: 0.1em;
    text-align: center;
  }

  #pressKey {
    margin-top: 20px;
    color: white;
    font-size: 0.9em;
  }

  .flash { background-color: #00ff66 !important; }

  .executed {
    color: white;
    margin-top: 20px;
    font-weight: bold;
  }
</style>
</head>
<body>
<div id="terminal"></div>
<div id="pressKey" style="display:none;">Press any key to continue...</div>

<div id="pfText">PF 2026</div>

<script>
const terminal = document.getElementById("terminal");
const pfText = document.getElementById("pfText");
const pressKey = document.getElementById("pressKey");

const lines = [
  "C:\\FIS> run PF2026.exe",
  "Initializing PF2026.exe ...",
  "Connecting to FIS mainframe ...",
  "Compiling joy.dll module ... done",
  "Loading new year data ............ OK",
  "Creating festive atmosphere ...",
  "PF 2026 — Fakulta informatiky a statistiky"
];

const cursor = document.createElement("span");
cursor.id = "cursor";
terminal.appendChild(cursor);

// ---------- Typing effect ----------
function typeLine(line, delay = 40) {
  return new Promise(resolve => {
    let i = 0;
    function next() {
      if (i < line.length) {
        cursor.insertAdjacentText("beforebegin", line[i]);
        i++;
        setTimeout(next, delay);
      } else {
        cursor.insertAdjacentText("beforebegin", "\n");
        resolve();
      }
    }
    next();
  });
}

// ---------- Sequential typing ----------
async function runTerminal() {
  for (const line of lines) {
    await typeLine(line);
    await new Promise(r => setTimeout(r, 300));
  }
  pressKey.style.display = "block";
  document.body.addEventListener("keydown", startLoading);
  document.body.addEventListener("click", startLoading);
}

// ---------- Loading bar ----------
async function showLoadingBar() {
  const barLine = document.createElement("div");
  terminal.appendChild(barLine);

  let progress = 0;
  const total = 30;

  return new Promise(resolve => {
    const interval = setInterval(() => {
      if (progress < total) {
        barLine.textContent = `Loading final message: [${"=".repeat(progress)}${" ".repeat(total - progress)}] ${Math.floor((progress / total)*100)}%`;
        progress++;
      } else {
        clearInterval(interval);
        barLine.textContent = `Loading final message: [${"=".repeat(total)}] 100%\n`;
        flashScreen();
        resolve();
      }
    }, 100);
  });
}

// ---------- Flash + show PF ----------
function flashScreen() {
  document.body.classList.add("flash");
  setTimeout(() => {
    document.body.classList.remove("flash");
    pfText.style.display = "block";
  }, 150);
}

// ---------- Type executed message ----------
function typeExecutedMessage(text, delay = 40) {
  return new Promise(resolve => {
    const div = document.createElement("div");
    div.className = "executed";
    terminal.appendChild(div);
    let i = 0;
    function next() {
      if (i < text.length) {
        div.textContent += text[i];
        i++;
        setTimeout(next, delay);
      } else {
        resolve();
      }
    }
    next();
  });
}

// ---------- Start loading ----------
async function startLoading() {
  pressKey.style.display = "none";
  document.body.removeEventListener("click", startLoading);
  document.body.removeEventListener("keydown", startLoading);

  await showLoadingBar();
  await new Promise(r => setTimeout(r, 500));
  await typeExecutedMessage("PF2026.exe was successfully executed.");
}

runTerminal();
</script>
</body>
</html>
